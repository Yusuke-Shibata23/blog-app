# ブログアプリケーション プロジェクト状況

## 概要
- Laravel + Vue.js + Tailwind CSSを使用したSPAブログアプリケーション
- ユーザー認証機能付き
- 投稿のCRUD操作が可能

## 技術スタック
- バックエンド: Laravel 10.x
- フロントエンド: Vue.js 3 + Composition API
- CSS: Tailwind CSS
- 認証: Laravel Sanctum
- データベース: MySQL

## 主要機能
1. ユーザー認証
   - 新規登録
   - ログイン/ログアウト
   - 認証状態の保持

2. 投稿管理
   - 投稿の作成
   - 投稿の一覧表示（自分の投稿のみ）
   - 投稿の編集
   - 投稿の削除
   - タグ付け機能

## プロジェクト構造
```
blog-app/
├── app/
│   ├── Http/
│   │   ├── Controllers/
│   │   │   ├── Auth/
│   │   │   │   └── AuthController.php
│   │   │   └── PostController.php
│   │   └── Middleware/
│   └── Models/
│       ├── User.php
│       └── Post.php
├── resources/
│   ├── js/
│   │   ├── components/
│   │   │   ├── Navigation.vue
│   │   │   ├── PostForm.vue
│   │   │   └── PostList.vue
│   │   ├── views/
│   │   │   ├── Home.vue
│   │   │   ├── Login.vue
│   │   │   ├── Register.vue
│   │   │   └── Posts.vue
│   │   ├── stores/
│   │   │   └── auth.js
│   │   └── router/
│   │       └── index.js
│   └── views/
│       └── welcome.blade.php
└── routes/
    ├── api.php
    └── web.php
```

## 認証フロー
1. ユーザー登録
   - `/api/register` エンドポイント
   - バリデーション: 名前、メール、パスワード

2. ログイン
   - `/api/login` エンドポイント
   - Sanctumトークン認証
   - トークンのローカルストレージ保存

3. 認証状態の確認
   - `/api/user` エンドポイント
   - ページリロード時に自動確認

## 投稿管理フロー
1. 投稿一覧表示
   - ログインユーザーの投稿のみ表示
   - ページネーション対応
   - タグによるフィルタリング

2. 投稿作成
   - タイトル、本文、タグの入力
   - バリデーション対応
   - 作成後の一覧更新

3. 投稿編集/削除
   - 投稿者のみが操作可能
   - 権限チェック実装

## 最近の修正点
1. ルーティング設定の修正
   - `web.php`のSPAルート設定を修正
   - APIリクエストの適切なルーティング

2. 認証状態の改善
   - トークン管理の強化
   - エラーハンドリングの改善

3. 投稿表示の改善
   - テスト用データの削除
   - 実際のデータ表示への移行

## 今後の課題
1. ブログ投稿管理機能の拡張
   - 下書き機能
     - 下書き保存
     - 下書き一覧表示
     - 下書きからの公開
   - 公開/非公開設定
     - ステータス管理
     - 公開スケジュール
   - 投稿日時の設定
     - 予約投稿
     - 投稿日時の編集
   - タグ管理の強化
     - タグの自動補完
     - タグの一括管理
   - 画像アップロード
     - 画像のプレビュー
     - 画像の最適化
     - 画像の管理

2. パフォーマンス最適化
   - APIレスポンスのキャッシュ
   - 画像アップロード機能
   - ページネーションの最適化

3. 機能拡張
   - コメント機能
   - いいね機能
   - 検索機能の強化

4. セキュリティ強化
   - CSRF対策
   - XSS対策
   - レート制限

## 実装計画
### ブログ投稿管理機能拡張
1. データベース設計
   - posts テーブルの拡張
     - status (draft/published)
     - published_at
     - scheduled_at
   - post_images テーブルの追加
     - post_id
     - image_path
     - order
   - post_tags テーブルの最適化
     - タグの重複防止
     - タグの検索効率化

2. バックエンド実装
   - PostController の拡張
     - 下書き関連メソッド
     - 公開/非公開管理
     - 画像アップロード
   - PostPolicy の拡張
     - 権限管理の強化
   - バリデーションの強化
     - 画像サイズ制限
     - タグの制限

3. フロントエンド実装
   - PostForm コンポーネントの拡張
     - 下書き保存機能
     - 公開/非公開切り替え
     - 画像アップロード
   - PostList コンポーネントの拡張
     - 下書き一覧表示
     - ステータス表示
     - 画像プレビュー
   - 新規コンポーネント
     - ImageUploader
     - TagManager
     - StatusSelector

4. テスト実装
   - 機能テスト
   - ユニットテスト
   - パフォーマンステスト

## 開発環境
- PHP 8.2
- Node.js 18.x
- MySQL 8.0
- XAMPP環境

# プロジェクトの現状と今後の計画

## 開発ルール

1. 既存機能の保護
   - 既存の機能を壊すような広範な変更は避ける
   - コア変数や重要なロジックは慎重に変更する
   - 変更前に影響範囲を十分に考慮する

2. 修正の原則
   - 問題の本質に焦点を当てる
   - 必要最小限の修正に留める
   - 既存のコードパターンを尊重する

3. テストと確認
   - 変更後は既存機能が正常に動作することを確認
   - エラーが発生した場合は、影響範囲を特定して修正
   - ユーザー体験を損なわないよう注意する

## 現在の状況

### 実装済みの機能
1. ユーザー認証
   - 登録
   - ログイン
   - ログアウト
   - 認証状態の保持

2. 投稿管理
   - 投稿の作成
   - 投稿の編集
   - 投稿の削除
   - 投稿一覧の表示
   - 下書き機能
   - 予約投稿機能

### 今後の実装予定
1. 投稿管理機能の拡張
   - 画像アップロード機能の改善
   - タグ機能の実装
   - 検索機能の強化

2. ユーザー管理機能
   - プロフィール編集
   - パスワード変更
   - アカウント削除

3. その他の機能
   - コメント機能
   - いいね機能
   - シェア機能 